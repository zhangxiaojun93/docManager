(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{351:function(e,a,t){"use strict";t.r(a);var n=t(2),s=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"文件下载接口文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件下载接口文档"}},[e._v("#")]),e._v(" "),t("strong",[e._v("文件下载接口文档")])]),e._v(" "),t("hr"),e._v(" "),t("h3",{attrs:{id:"_1-接口描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-接口描述"}},[e._v("#")]),e._v(" "),t("strong",[e._v("1. 接口描述")])]),e._v(" "),t("ul",[t("li",[e._v("接口名称\napi/msgFile/downloadFile     文件下载接口")]),e._v(" "),t("li",[e._v("接口编码"),t("br"),e._v("\nUTF-8")]),e._v(" "),t("li",[e._v("数据格式\nJSON")]),e._v(" "),t("li",[e._v("支持协议\nHTTP(POST/GET)")])]),e._v(" "),t("h3",{attrs:{id:"_2-请求参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-请求参数"}},[e._v("#")]),e._v(" "),t("strong",[e._v("2. 请求参数")])]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("请求参数")]),e._v(" "),t("th",[e._v("参数类型")]),e._v(" "),t("th",[e._v("参数说明")]),e._v(" "),t("th",[e._v("是否必选")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("mediaId")]),e._v(" "),t("td",[e._v("String")]),e._v(" "),t("td",[e._v("文件唯一标志")]),e._v(" "),t("td",[e._v("是")])])])]),e._v(" "),t("br"),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("参数说明")])]),e._v(" "),t("p",[e._v("\n    文件唯一标志：支持多文件下载，多个mediaId之间用逗号隔开，多文件下载时为压缩包格式（zip），压缩文件名为第一个mediaId对应的文件名\n")]),e._v(" "),t("p",[t("em",[e._v("注：通过queryFileInfoByMediaId(String[] mediaIds)查询文件信息，返回格式为 List<IMessageFileVo>")])])])]),e._v(" "),t("br"),e._v(" "),t("h3",{attrs:{id:"_3-调用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-调用示例"}},[e._v("#")]),e._v(" "),t("strong",[e._v("3. 调用示例")])]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"mediaId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0dccff18a3cc44fe864206113d0a23c9,06af878cf258407e8108a6c9e6669853"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("br"),e._v(" "),t("h3",{attrs:{id:"_4-前端示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-前端示例"}},[e._v("#")]),e._v(" "),t("strong",[e._v("4. 前端示例")])]),e._v(" "),t("div",{staticClass:"language-vue extra-class"},[t("pre",{pre:!0,attrs:{class:"language-vue"}},[t("code",[e._v("downloadFile (data) {\n    Base.submit(null, {\n      url: 'api/msgFile/downloadFile',\n      data: data,\n      responseType: 'blob'\n    }).then((data) => {\n      if (!data.headers.filename) {\n        return\n      }\n      let blob = new Blob([data.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8' })\n      if (window.navigator.msSaveBlob) { // 没有此判断的话，ie11下的导出没有效果\n        window.navigator.msSaveBlob(blob, unescape(data.headers.filename.replace(/\\\\u/g, '%u')))\n      } else {\n        var downloadElement = document.createElement('a')\n        var href = window.URL.createObjectURL(blob) // 创建下载的链接\n        downloadElement.href = href\n        let s = decodeURIComponent(data.headers.filename)\n        let m = s.replace(/\\\\u/g, '%u')\n        downloadElement.download = unescape(m) // 下载后文件名\n        document.body.appendChild(downloadElement)\n        downloadElement.click() // 点击下载\n        document.body.removeChild(downloadElement) // 下载完成移除元素\n        window.URL.revokeObjectURL(href) // 释放掉blob对象\n      }\n    })\n  }\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);